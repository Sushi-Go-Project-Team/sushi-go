import*as t from"react";import{createContext as e,useLayoutEffect as n,useEffect as r,useContext as o,useRef as a,useInsertionEffect as i,useCallback as s,useMemo as l,forwardRef as c,createElement as u}from"react";const f=e({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),d=e({}),m=e(null),p="undefined"!=typeof document,g=p?n:r,y=e({strict:!1});function h(t,e,n){return s(r=>{var o;r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&("function"==typeof n?n(r):"object"==typeof(o=n)&&Object.prototype.hasOwnProperty.call(o,"current")&&(n.current=r))},[e])}function v(t){return"string"==typeof t||Array.isArray(t)}function w(t){return"object"==typeof t&&"function"==typeof t.start}const b=["initial","animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"];function x(t){return w(t.animate)||b.some(e=>v(t[e]))}function S(t){const{initial:e,animate:n}=function(t,e){if(x(t)){const{initial:e,animate:n}=t;return{initial:!1===e||v(e)?e:void 0,animate:v(n)?n:void 0}}return!1!==t.inherit?e:{}}(t,o(d));return l(()=>({initial:e,animate:n}),[V(e),V(n)])}function V(t){return Array.isArray(t)?t.join(" "):t}const A={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},E={};for(const t in A)E[t]={isEnabled:e=>A[t].some(t=>!!e[t])};function T(t){const e=a(null);return null===e.current&&(e.current=t()),e.current}const k=!1;let L=1;const P=e({}),W=e({}),C=Symbol.for("motionComponentSymbol");function O({preloadedFeatures:e,createVisualElement:n,useRender:s,useVisualState:l,Component:u}){e&&function(t){for(const e in t)E[e]={...E[e],...t[e]}}(e);const v=c((function(c,v){let w;const b={...o(f),...c,layoutId:B(c)},{isStatic:x}=b,V=S(c),A=x?void 0:T(()=>{if(k)return L++}),E=l(c,x);if(!x&&p){V.visualElement=function(t,e,n,s){const{visualElement:l}=o(d),c=o(y),u=o(m),p=o(f).reducedMotion,h=a();s=s||c.renderer,!h.current&&s&&(h.current=s(t,{visualState:e,parent:l,props:n,presenceContext:u,blockInitialAnimation:!!u&&!1===u.initial,reducedMotionConfig:p}));const v=h.current;return i(()=>{v&&v.update(n,u)}),g(()=>{v&&v.render()}),r(()=>{v&&v.updateFeatures()}),(window.HandoffAppearAnimations?g:r)(()=>{v&&v.animationState&&v.animationState.animateChanges()}),v}(u,E,b,n);const t=o(W),s=o(y).strict;V.visualElement&&(w=V.visualElement.loadFeatures(b,s,e,A,t))}return t.createElement(d.Provider,{value:V},w&&V.visualElement?t.createElement(w,{visualElement:V.visualElement,...b}):null,s(u,c,A,h(E,V.visualElement,v),E,x,V.visualElement))}));return v[C]=u,v}function B({layoutId:t}){const e=o(P).id;return e&&void 0!==t?e+"-"+t:t}const M=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function R(t){return"string"==typeof t&&!t.includes("-")&&!!(M.indexOf(t)>-1||/[A-Z]/.test(t))}const X={},Y=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],H=new Set(Y);function F(t,{layout:e,layoutId:n}){return H.has(t)||t.startsWith("origin")||(e||void 0!==n)&&(!!X[t]||"opacity"===t)}const $=t=>Boolean(t&&t.getVelocity),j={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},D=Y.length;const I=(Z="--",t=>"string"==typeof t&&t.startsWith(Z));var Z;const z=(t,e)=>e&&"number"==typeof t?e.transform(t):t,U={test:t=>"number"==typeof t,parse:parseFloat,transform:t=>t},q={...U,transform:t=>((t,e,n)=>Math.min(Math.max(n,t),e))(0,1,t)},N={...U,default:1};const _=t=>({test:e=>function(t){return"string"==typeof t}(e)&&e.endsWith(t)&&1===e.split(" ").length,parse:parseFloat,transform:e=>`${e}${t}`}),G=_("deg"),J=_("%"),K=_("px"),Q={...J,parse:t=>J.parse(t)/100,transform:t=>J.transform(100*t)},tt={...U,transform:Math.round},et={borderWidth:K,borderTopWidth:K,borderRightWidth:K,borderBottomWidth:K,borderLeftWidth:K,borderRadius:K,radius:K,borderTopLeftRadius:K,borderTopRightRadius:K,borderBottomRightRadius:K,borderBottomLeftRadius:K,width:K,maxWidth:K,height:K,maxHeight:K,size:K,top:K,right:K,bottom:K,left:K,padding:K,paddingTop:K,paddingRight:K,paddingBottom:K,paddingLeft:K,margin:K,marginTop:K,marginRight:K,marginBottom:K,marginLeft:K,rotate:G,rotateX:G,rotateY:G,rotateZ:G,scale:N,scaleX:N,scaleY:N,scaleZ:N,skew:G,skewX:G,skewY:G,distance:K,translateX:K,translateY:K,translateZ:K,x:K,y:K,z:K,perspective:K,transformPerspective:K,opacity:q,originX:Q,originY:Q,originZ:K,zIndex:tt,fillOpacity:q,strokeOpacity:q,numOctaves:tt};function nt(t,e,n,r){const{style:o,vars:a,transform:i,transformOrigin:s}=t;let l=!1,c=!1,u=!0;for(const t in e){const n=e[t];if(I(t)){a[t]=n;continue}const r=et[t],f=z(n,r);if(H.has(t)){if(l=!0,i[t]=f,!u)continue;n!==(r.default||0)&&(u=!1)}else t.startsWith("origin")?(c=!0,s[t]=f):o[t]=f}if(e.transform||(l||r?o.transform=function(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,o){let a="";for(let e=0;e<D;e++){const n=Y[e];if(void 0!==t[n]){a+=`${j[n]||n}(${t[n]}) `}}return e&&!t.z&&(a+="translateZ(0)"),a=a.trim(),o?a=o(t,r?"":a):n&&r&&(a="none"),a}(t.transform,n,u,r):o.transform&&(o.transform="none")),c){const{originX:t="50%",originY:e="50%",originZ:n=0}=s;o.transformOrigin=`${t} ${e} ${n}`}}const rt=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ot(t,e,n){for(const r in e)$(e[r])||F(r,n)||(t[r]=e[r])}function at(t,e,n){const r={};return ot(r,t.style||{},t),Object.assign(r,function({transformTemplate:t},e,n){return l(()=>{const r={style:{},transform:{},transformOrigin:{},vars:{}};return nt(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}(t,e,n)),t.transformValues?t.transformValues(r):r}function it(t,e,n){const r={},o=at(t,e,n);return t.drag&&!1!==t.dragListener&&(r.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=!0===t.drag?"none":"pan-"+("x"===t.drag?"y":"x")),void 0===t.tabIndex&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=o,r}const st=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function lt(t){return t.startsWith("while")||t.startsWith("drag")&&"draggable"!==t||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||st.has(t)}let ct=t=>!lt(t);try{(ut=require("@emotion/is-prop-valid").default)&&(ct=t=>t.startsWith("on")?!lt(t):ut(t))}catch(t){}var ut;function ft(t,e,n){return"string"==typeof t?t:K.transform(e+n*t)}const dt={offset:"stroke-dashoffset",array:"stroke-dasharray"},mt={offset:"strokeDashoffset",array:"strokeDasharray"};function pt(t,{attrX:e,attrY:n,originX:r,originY:o,pathLength:a,pathSpacing:i=1,pathOffset:s=0,...l},c,u,f){if(nt(t,l,c,f),u)return void(t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox));t.attrs=t.style,t.style={};const{attrs:d,style:m,dimensions:p}=t;d.transform&&(p&&(m.transform=d.transform),delete d.transform),p&&(void 0!==r||void 0!==o||m.transform)&&(m.transformOrigin=function(t,e,n){return`${ft(e,t.x,t.width)} ${ft(n,t.y,t.height)}`}(p,void 0!==r?r:.5,void 0!==o?o:.5)),void 0!==e&&(d.x=e),void 0!==n&&(d.y=n),void 0!==a&&function(t,e,n=1,r=0,o=!0){t.pathLength=1;const a=o?dt:mt;t[a.offset]=K.transform(-r);const i=K.transform(e),s=K.transform(n);t[a.array]=`${i} ${s}`}(d,a,i,s,!1)}const gt=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}}),yt=t=>"string"==typeof t&&"svg"===t.toLowerCase();function ht(t,e,n,r){const o=l(()=>{const n={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return pt(n,e,{enableHardwareAcceleration:!1},yt(r),t.transformTemplate),{...n.attrs,style:{...n.style}}},[e]);if(t.style){const e={};ot(e,t.style,t),o.style={...e,...o.style}}return o}function vt(t=!1){return(e,n,r,o,{latestValues:a},i)=>{const s=(R(e)?ht:it)(n,a,i,e),c={...function(t,e,n){const r={};for(const o in t)"values"===o&&"object"==typeof t.values||(ct(o)||!0===n&&lt(o)||!e&&!lt(o)||t.draggable&&o.startsWith("onDrag"))&&(r[o]=t[o]);return r}(n,"string"==typeof e,t),...s,ref:o},{children:f}=n,d=l(()=>$(f)?f.get():f,[f]);return r&&(c["data-projection-id"]=r),u(e,{...c,children:d})}}const wt=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function bt(t,e,n,r){!function(t,{style:e,vars:n},r,o){Object.assign(t.style,e,o&&o.getProjectionStyles(r));for(const e in n)t.style.setProperty(e,n[e])}(t,e,void 0,r);for(const n in e.attrs)t.setAttribute(wt.has(n)?n:n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e.attrs[n])}function xt(t,e){const{style:n}=t,r={};for(const o in n)($(n[o])||e.style&&$(e.style[o])||F(o,t))&&(r[o]=n[o]);return r}function St(t){const e=$(t)?t.get():t;return n=e,Boolean(n&&"object"==typeof n&&n.mix&&n.toValue)?e.toValue():e;var n}const Vt=t=>(e,n)=>{const r=o(d),a=o(m),i=()=>function({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,o,a){const i={latestValues:At(r,o,a,t),renderState:e()};return n&&(i.mount=t=>n(r,t,i)),i}(t,e,r,a);return n?i():T(i)};function At(t,e,n,r){const o={},a=r(t,{});for(const t in a)o[t]=St(a[t]);let{initial:i,animate:s}=t;const l=x(t),c=function(t){return Boolean(x(t)||t.variants)}(t);e&&c&&!l&&!1!==t.inherit&&(void 0===i&&(i=e.initial),void 0===s&&(s=e.animate));let u=!!n&&!1===n.initial;u=u||!1===i;const f=u?s:i;if(f&&"boolean"!=typeof f&&!w(f)){(Array.isArray(f)?f:[f]).forEach(e=>{const n=function(t,e,n,r={},o={}){return"function"==typeof e&&(e=e(void 0!==n?n:t.custom,r,o)),"string"==typeof e&&(e=t.variants&&t.variants[e]),"function"==typeof e&&(e=e(void 0!==n?n:t.custom,r,o)),e}(t,e);if(!n)return;const{transitionEnd:r,transition:a,...i}=n;for(const t in i){let e=i[t];if(Array.isArray(e)){e=e[u?e.length-1:0]}null!==e&&(o[t]=e)}for(const t in r)o[t]=r[t]})}return o}const Et={useVisualState:Vt({scrapeMotionValuesFromProps:function(t,e){const n=xt(t,e);for(const r in t)if($(t[r])||$(e[r])){n["x"===r||"y"===r?"attr"+r.toUpperCase():r]=t[r]}return n},createRenderState:gt,onMount:(t,e,{renderState:n,latestValues:r})=>{try{n.dimensions="function"==typeof e.getBBox?e.getBBox():e.getBoundingClientRect()}catch(t){n.dimensions={x:0,y:0,width:0,height:0}}pt(n,r,{enableHardwareAcceleration:!1},yt(e.tagName),t.transformTemplate),bt(e,n)}})},Tt={useVisualState:Vt({scrapeMotionValuesFromProps:xt,createRenderState:rt})};const kt=function(t){function e(e,n={}){return O(t(e,n))}if("undefined"==typeof Proxy)return e;const n=new Map;return new Proxy(e,{get:(t,r)=>(n.has(r)||n.set(r,e(r)),n.get(r))})}((function(t,{forwardMotionProps:e=!1},n,r){return{...R(t)?Et:Tt,preloadedFeatures:n,useRender:vt(e),createVisualElement:r,Component:t}}));export{kt as m};
